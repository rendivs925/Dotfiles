# i3 Config File (v4)
# For more details, visit: https://i3wm.org/docs/userguide.html

# Mod key setup
set $mod Mod1
floating_modifier $mod

# Font configuration
font pango:"JetBrains Mono" 12
# font pango:"Hack Nerd Font" 10

# Client color configurations
client.focused          #005B73 #005B73 #FFFFFF
client.unfocused        #3E3E3E #3E3E3E #B0B0B0
client.urgent           #FF2D00 #FF2D00 #FF2D00

# Window border settings
for_window [class="^.*"] border pixel 0

# Open Notes
# bindsym $mod+Shift+d exec --no-startup-id alacritty --title NotesFloat -e sh -c 'cd ~/Notes && nvim'

# Auto floating 
# for_window [class=".*"] floating enable

# Border toggle keybindings
bindsym $mod+Shift+b exec --no-startup-id i3-msg '[class="^.*"] border pixel 3'
bindsym $mod+Shift+x exec --no-startup-id i3-msg '[class="^.*"] border pixel 0'

# Move mouse slowly 
bindsym Mod4+h exec --no-startup-id xdotool mousemove_relative -- -10 0
bindsym Mod4+l exec --no-startup-id xdotool mousemove_relative -- 10 0
bindsym Mod4+k exec --no-startup-id xdotool mousemove_relative -- 0 -10
bindsym Mod4+j exec --no-startup-id xdotool mousemove_relative -- 0 10

# Move 1/3 of screen width or height 
bindsym Mod4+Shift+h exec --no-startup-id xdotool mousemove_relative -- -200 0
bindsym Mod4+Shift+l exec --no-startup-id xdotool mousemove_relative -- 200 0
bindsym Mod4+Shift+k exec --no-startup-id xdotool mousemove_relative -- 0 -100
bindsym Mod4+Shift+j exec --no-startup-id xdotool mousemove_relative -- 0 100

workspace 1 output HDMI-1-0
workspace 2 output HDMI-1-0
workspace 3 output HDMI-1-0
workspace 4 output HDMI-1-0
workspace 5 output HDMI-1-0
workspace 6 output eDP
workspace 7 output eDP
workspace 8 output eDP
workspace 9 output eDP
workspace 10 output eDP

# Set dual monitor layout at startup
exec_always --no-startup-id xrandr \
  --output eDP --mode 2560x1600 --scale 1x1 \
  --output HDMI-1-0 --mode 2560x1440 --rate 60 --scale 1x1 --right-of eDP

exec --no-startup-id xrandr --dpi 188

# left click 
bindsym Mod4+Return exec --no-startup-id ~/.config/i3/scripts/left_click_and_stop.sh

# Start holding the left-click
bindsym Mod4+Control+n exec --no-startup-id ~/.config/i3/scripts/hold_left_click.sh

# Enable XDG autostart
exec --no-startup-id dex --autostart --environment i3

exec --no-startup-id dunst
# Touchpad settings
exec --no-startup-id xinput set-prop "ASUE1301:00 04F3:3128 Touchpad" "libinput Tapping Enabled" 1

# Screenshot command
bindsym Print exec --no-startup-id maim --format=png "/home/$USER/Pictures/screenshot-$(date -u +'%Y%m%d-%H%M%SZ')-all.png"

# Set default wallpaper on startup
exec_always --no-startup-id feh --bg-scale ~/Downloads/peakpx.jpg 

# Wallpapers bindings
bindsym ctrl+1 exec --no-startup-id feh --bg-scale ~/Downloads/Images/yosemite-wallpaper-3840x2160-apple-181.jpg 
bindsym ctrl+2 exec --no-startup-id feh --bg-scale ~/Downloads/Images/maroon-bells-wallpaper-3840x2160-4k-resolution-outdoor-adventure-11987.jpg 
bindsym ctrl+3 exec --no-startup-id feh --bg-scale ~/Downloads/Images/yosemite-wallpaper-3840x2160-8k-scenery-serene-wilderness-3955.jpg 
bindsym ctrl+4 exec --no-startup-id feh --bg-scale ~/Downloads/Images/wallpaperflare.com_wallpaper4.jpg
bindsym ctrl+5 exec --no-startup-id feh --bg-scale ~/Downloads/Images/wallpaperflare.com_wallpaper5.jpg
bindsym ctrl+6 exec --no-startup-id feh --bg-scale ~/Downloads/Images/wolf-on-rock-in-the-forest_3840x2160_xtrafondos.com.jpg  
bindsym ctrl+7 exec --no-startup-id feh --bg-scale ~/Downloads/Images/pexels-therato-3855632.jpg
bindsym ctrl+8 exec --no-startup-id feh --bg-scale ~/Downloads/Images/ufo-in-suburbs-blue-night-vibes-desktop-wallpaper-4k.jpg 
bindsym ctrl+9 exec --no-startup-id feh --bg-scale ~/Downloads/Images/wp9181131-4k-pasture-wallpapers.jpg

# Enable scroll lock
exec --no-startup-id xmodmap -e "add mod3 = Scroll_Lock"

# Run unclutter at startup
exec --no-startup-id unclutter -idle 1 -root

# Shutdown the system with $mod+Escape
# bindsym $mod+Shift+Escape exec --no-startup-id shutdown now

# Lock screen and power management
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork
# Network and audio applets
exec --no-startup-id nm-applet

# === HiDPI Scaling Fix (16" 2K Display, slightly smaller UI) ===
# exec_always --no-startup-id xrandr --dpi 115
# exec_always --no-startup-id export GDK_SCALE=1.1
# exec_always --no-startup-id export GDK_DPI_SCALE=0.9
# exec_always --no-startup-id export QT_AUTO_SCREEN_SCALE_FACTOR=1
# exec_always --no-startup-id export QT_SCALE_FACTOR=1.1

# Run picom 
exec --no-startup-id picom
exec --no-startup-id flameshot

# Application bindings
bindsym $mod+Return exec --no-startup-id alacritty  
bindsym $mod+a exec --no-startup-id signal-desktop  
bindsym $mod+c exec flameshot gui
bindsym $mod+Shift+z exec zathura
bindsym $mod+q kill
bindsym $mod+b exec --no-startup-id google-chrome-stable
bindsym $mod+e exec --no-startup-id alacritty -e ranger

exec --no-startup-id clipmenud

bindsym $mod+d exec --no-startup-id rofi -show drun -theme ~/.config/rofi/aura-dark.rasi

bindsym $mod+y exec --no-startup-id CM_LAUNCHER=rofi clipmenu -theme ~/.config/rofi/aura-dark.rasi -p CLIPBOARD:

# Window focus navigation
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Move focused windows
bindsym $mod+Shift+h move left
bindsym $mod+Shift+l move right
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up

# Split orientation
bindsym $mod+s split h
bindsym $mod+w split v

# Toggle floating, set initial size, and center
bindsym $mod+Shift+space floating toggle, resize set 1720 1020, move position center

# Make floating window bigger 
bindsym $mod+plus resize grow width 60 px or 60 ppt, resize grow height 30 px or 30 ppt, move position center

# Make floating window smaller 
bindsym $mod+minus resize shrink width 60 px or 60 ppt, resize shrink height 30 px or 30 ppt, move position center

bindsym $mod+space focus mode_toggle

# Fullscreen mode
bindsym $mod+f fullscreen toggle

# Resize mode
mode "resize" {
    bindsym $mod+Shift+k resize grow height 10 px or 10 ppt
    bindsym $mod+Shift+j resize shrink height 10 px or 10 ppt
    bindsym $mod+Shift+h resize shrink width 10 px or 10 ppt
    bindsym $mod+Shift+l resize grow width 10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

# Gaps configuration
gaps inner 20

# Workspace definitions
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# Workspace bindings
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# bindsym $mod+h workspace number $ws1
# bindsym $mod+j workspace number $ws2
# bindsym $mod+k workspace number $ws3
# bindsym $mod+l workspace number $ws4
# bindsym $mod+u workspace number $ws5
# bindsym $mod+m workspace number $ws6
# bindsym $mod+7 workspace number $ws7
# bindsym $mod+8 workspace number $ws8
# bindsym $mod+9 workspace number $ws9
# bindsym $mod+0 workspace number $ws10

# bindsym $mod+n workspace next
# bindsym $mod+p workspace prev

# Move container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# i3 reload and restart
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+q exec "i3-nagbar -t warning -m 'Do you really want to exit i3?' -B 'Yes, exit i3' 'i3-msg exit'"

exec --no-startup-id qvm-start-gui --all --watch

# Polybar configuration
exec_always --no-startup-id ~/.config/polybar/launch.sh
