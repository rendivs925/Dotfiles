####################################
# Picom: Best Performance Config
####################################

backend = "egl";              # GPU-accelerated, modern path
vsync = false;                # skip frame sync (lowest latency)
shadow = false;               # no shadows for max speed

####################################
# Smooth workspace fades
####################################
fading = true;                # enable fade effects
fade-delta = 6;               # smaller = smoother but more frames
fade-in-step = 0.05;          # fade-in rate (0.05 = moderate)
fade-out-step = 0.05;         # fade-out rate
no-fading-openclose = true;   # instant open/close for snappy feel
no-fading-destroyed-argb = true;

####################################
# Transparency
####################################
inactive-opacity = 1.0;
active-opacity = 1.0;
frame-opacity = 1.0;

opacity-rule = [
  "90:class_g = 'Alacritty'",
  "80:class_g = 'dev.warp.Warp'"
];

####################################
# Performance tuning
####################################
use-damage = true;            # only redraw changed regions
unredir-if-possible = true;   # disable compositor when fullscreen
detect-rounded-corners = false;
detect-client-opacity = true;
detect-transient = true;

####################################
# EGL optimization
####################################
glx-no-stencil = true;        # skip stencil buffer
glx-copy-from-front = false;  # avoid slow buffer copies
experimental-backends = true; # enables EGL improvements

####################################
# Notes
# - EGL backend = GPU compositing with very low CPU use.
# - vsync=false keeps input delay near zero.
# - unredir-if-possible frees GPU when fullscreen apps run.
# - keep fading moderate for visible workspace smoothness
#   without overloading GPU.
####################################
